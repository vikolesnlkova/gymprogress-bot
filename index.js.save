require('dotenv').config();
const { Telegraf, Markup } = require('telegraf');

const bot = new Telegraf(process.env.BOT_TOKEN);

console.log('ðŸš€ Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð±Ð¾Ñ‚Ð°...');

bot.start((ctx) => {
  console.log('âœ… ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ð» Ð±Ð¾Ñ‚Ð°');
  ctx.reply(
    `ðŸ‹ï¸ ÐŸÑ€Ð¸Ð²ÐµÑ‚, ${ctx.from.first_name}! FitTrackBot Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½!`,
    Markup.keyboard([
      ['ðŸ“Š ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÑƒ'],
      ['âž• Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÑƒ'],
      ['â„¹ï¸ ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ']
    ]).resize()
  );
});

bot.hears('ðŸ“Š ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÑƒ', (ctx) => {
  ctx.reply('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÑƒ Ð´Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°:');
});

bot.hears('âž• Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÑƒ', (ctx) => {
  ctx.reply('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð¹ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÐ¸:');
});

bot.hears('â„¹ï¸ ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ', (ctx) => {
  ctx.reply('ðŸ¤– FitTrackBot - Ñ‚Ñ€ÐµÐºÐµÑ€ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²Ð¾Ðº\n\nÐ”Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð° ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÑƒ Ð¸Ð»Ð¸ Ð½Ð°Ñ‡Ð½Ð¸Ñ‚Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÑƒÑŽ!');
});

bot.on('text', (ctx) => {
  if (ctx.message.text.startsWith('/')) return;
  ctx.reply(`Ð’Ñ‹ ÑÐºÐ°Ð·Ð°Ð»Ð¸: "${ctx.message.text}"`);
});

bot.launch().then(() => {
  console.log('ðŸ¤– FitTrackBot ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½!');
}).catch((error) => {
  console.log('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð±Ð¾Ñ‚Ð°:', error.message);
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ
process.once('SIGINT', () => bot.stop('SIGINT'));
process.once('SIGTERM', () => bot.stop('SIGTERM'));
